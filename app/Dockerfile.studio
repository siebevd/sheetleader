FROM oven/bun:1.1

WORKDIR /app

# Copy dependency files and install
COPY package.json bun.lockb* ./
RUN bun install

# Copy app source (including drizzle.config.ts)
COPY . .

EXPOSE 4983

ENV NODE_ENV=development

# Run the locally installed drizzle-kit
CMD ["bun", "run", "drizzle:studio"]
